---
import { Image } from "astro:assets";
import dojoLogo from "../../assets/dojo.svg";
import Button from "./Button.astro";
import "../../styles/global.css";

export interface Props {
	title: string;
}

const { title } = Astro.props;
---
<!-- Site Header -->
<header class="sticky top-0 z-50 border-b border-white/5 bg-[#0b0b0c]/80 backdrop-blur supports-[backdrop-filter]:bg-[#0b0b0c]/60">
  <!-- Support Banner -->
  <div id="support-banner" class="bg-[#db3434] text-white hidden">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex items-start sm:items-center justify-between gap-3 py-2 text-sm">
        <p class="leading-snug">
          Support Bill and Keonne in their fight against unjust prosecution in the case against Samourai Wallet.
          <a class="underline font-medium hover:opacity-90" href="https://billandkeonne.org/" target="_blank" rel="noreferrer">Learn more</a>
          <span class="px-1">·</span>
          <a class="underline hover:opacity-90" href="https://www.change.org/p/stand-up-for-freedom-pardon-the-innocent-coders-jailed-for-building-privacy-tools" target="_blank" rel="noreferrer">Sign the petition</a>
          <span class="px-1">·</span>
          <a class="underline hover:opacity-90" href="https://www.givesendgo.com/billandkeonne" target="_blank" rel="noreferrer">Donate to families</a>
        </p>
        <button data-dismiss aria-label="Dismiss support banner" class="shrink-0 inline-flex items-center justify-center rounded p-1 hover:bg-white/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/60 cursor-pointer">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-5 w-5" aria-hidden="true">
            <path fill-rule="evenodd" d="M10 8.586 4.293 2.879A1 1 0 1 0 2.88 4.293L8.586 10l-5.707 5.707a1 1 0 1 0 1.414 1.414L10 11.414l5.707 5.707a1 1 0 0 0 1.414-1.414L11.414 10l5.707-5.707A1 1 0 0 0 15.707 2.88L10 8.586Z" clip-rule="evenodd" />
          </svg>
        </button>
      </div>
    </div>
  </div>
  <script>
    (function() {
      try {
        const key = 'support-banner-dismissed';
        const banner = document.getElementById('support-banner');

        if (!banner) return;

        if (sessionStorage.getItem(key) === '1') {
          banner.style.display = 'none';
          return;
        } else {
          banner.style.display = 'block'
        }

        const btn = banner.querySelector('[data-dismiss]');

        if (btn) {
          btn.addEventListener('click', () => {
            banner.style.display = 'none';
            try { sessionStorage.setItem(key, '1'); } catch (e) { /* ignore */ }
          });
        }
      } catch (e) {
        // no-op
      }
    })();
  </script>
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="flex h-16 items-center justify-between">
      <a href="/" class="group inline-flex items-center gap-3">
        <span class="inline-flex h-9 w-9 items-center justify-center rounded-md  ring-1 ring-white/10">
            <Image src={dojoLogo} alt="Samourai Dojo Logo" width="30" height="30" loading="eager" />
        </span>
        <span class="text-sm font-semibold tracking-wide text-zinc-100">
          {title}
        </span>
      </a>
      <div class="flex items-center gap-3">
        <Button
          href="https://github.com/Samourai-Wallet/dojo"
          target="_blank"
          rel="noreferrer"
          type="secondary"
          size="sm"
        >
          View on GitHub
        </Button>
      </div>
    </div>
  </div>
</header>
